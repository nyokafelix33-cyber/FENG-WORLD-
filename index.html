<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StreamX | Premium Cinema</title>
    <style>
        :root { --main: #ff0000; --accent: #d3f243; --bg: #0a0a0a; --surface: #121212; }
        body { background: var(--bg); color: #fff; font-family: 'Segoe UI', sans-serif; margin: 0; }

        /* --- MODERN HEADER --- */
        header { 
            background: linear-gradient(to bottom, rgba(0,0,0,0.9), transparent);
            padding: 20px 5%; display: flex; align-items: center; justify-content: space-between;
            position: fixed; top: 0; width: 90%; z-index: 1000; transition: 0.3s;
        }
        .logo { font-size: 28px; font-weight: 900; color: var(--main); text-decoration: none; letter-spacing: -1px; }
        .nav-links span { margin-left: 25px; cursor: pointer; font-size: 14px; font-weight: 600; text-transform: uppercase; color: #eee; }
        .nav-links span:hover { color: var(--accent); }

        /* --- HERO BANNER --- */
        .hero { 
            height: 70vh; background: linear-gradient(to right, #000, transparent), url('https://images.unsplash.com/photo-1626814026160-2237a95fc5a0?w=1200');
            background-size: cover; background-position: center;
            display: flex; flex-direction: column; justify-content: center; padding: 0 5%; margin-bottom: 30px;
        }
        .hero-content h1 { font-size: 50px; margin: 0; color: var(--accent); }
        .hero-content p { max-width: 500px; font-size: 16px; color: #ccc; margin: 20px 0; }
        .play-now { background: var(--main); color: #fff; padding: 12px 30px; border: none; border-radius: 5px; font-weight: 900; cursor: pointer; }

        /* --- CONTENT ROWS --- */
        .container { padding: 0 5%; }
        .section-title { font-size: 20px; font-weight: 700; margin: 40px 0 20px; display: flex; align-items: center; gap: 10px; }
        .section-title::before { content: ''; width: 4px; height: 20px; background: var(--main); border-radius: 2px; }
        
        .row { display: flex; overflow-x: auto; gap: 20px; padding-bottom: 20px; scrollbar-width: none; }
        .card { min-width: 180px; background: var(--surface); border-radius: 12px; overflow: hidden; border: 1px solid #222; cursor: pointer; transition: 0.4s; }
        .card:hover { transform: scale(1.05); border-color: var(--accent); box-shadow: 0 10px 20px rgba(0,0,0,0.5); }
        .card img { width: 100%; height: 260px; object-fit: cover; }
        .card p { padding: 10px; margin: 0; font-size: 13px; text-align: center; font-weight: 600; }

        /* --- SETTINGS MODAL --- */
        #settingsModal { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 2000; display: none; align-items: center; justify-content: center; }
        .settings-card { background: #111; width: 400px; border-radius: 20px; border: 1px solid #333; padding: 30px; }
        .menu-btn { width: 100%; padding: 15px; margin-bottom: 10px; background: #222; border: 1px solid #444; color: #fff; border-radius: 10px; text-align: left; cursor: pointer; font-weight: 700; }
        
        /* --- PLAYER --- */
        #player { position: fixed; inset: 0; background: #000; z-index: 5000; display: none; flex-direction: column; }
        .player-header { padding: 15px; background: #111; display: flex; justify-content: space-between; align-items: center; }
        iframe { width: 100%; height: 100%; border: none; }
    </style>
</head>
<body onload="init()">

    <header id="navbar">
        <a href="#" class="logo">STREAMX</a>
        <div class="nav-links">
            <span onclick="loadSection('movie')">Movies</span>
            <span onclick="loadSection('tv')">Series</span>
            <span onclick="window.scrollTo(0,0)" style="color:var(--main)">‚óè Live TV</span>
            <span onclick="openSettings()">‚öôÔ∏è MENU</span>
        </div>
    </header>

    <div class="hero">
        <div class="hero-content">
            <h1>Unlimited World Cinema</h1>
            <p>Watch thousands of movies and TV shows from around the globe. Pure entertainment, zero limits. No adult content, purely professional.</p>
            <button class="play-now" onclick="loadSection('movie')">BROWSE NOW</button>
        </div>
    </div>

    <div class="container">
        <div class="section-title">LIVE GLOBAL CHANNELS</div>
        <div class="row">
            <div class="card" onclick="playVideo('https://www.youtube.com/embed/jfKfPfyJRdk?autoplay=1')">
                <img src="https://images.unsplash.com/photo-1504450758481-7338eba7524a?w=400"><p>Sky News Live</p>
            </div>
            <div class="card" onclick="playVideo('https://www.youtube.com/embed/9Auq9mYxvEE?autoplay=1')">
                <img src="https://images.unsplash.com/photo-1585829365234-781fcd0d4301?w=400"><p>LBC News HD</p>
            </div>
        </div>

        <div class="section-title" id="gridTitle">TRENDING MOVIES</div>
        <div class="row" id="mediaGrid">
            <p style="color:#666; padding: 20px;">Waking up servers...</p>
        </div>
    </div>

    <div id="settingsModal">
        <div class="settings-card">
            <h2 style="color:var(--main); margin-top:0;">Control Center</h2>
            <button class="menu-btn" onclick="toggleSub('auth')">üë§ Profile & Account</button>
            <div id="auth" style="display:none; padding:10px;">
                <input type="text" placeholder="Email" style="width:90%; padding:10px; margin-bottom:10px; background:#000; color:#fff; border:1px solid #333; border-radius:5px;">
                <button style="width:100%; padding:10px; background:var(--accent); border:none; border-radius:5px; font-weight:800;">SAVE PROFILE</button>
            </div>

            <button class="menu-btn" onclick="toggleSub('about')">‚ÑπÔ∏è Corporate About Us</button>
            <div id="about" style="display:none; padding:10px; font-size:13px; color:#aaa;">
                <p><strong>Founder:</strong> Felix Nyoka</p>
                <p>StreamX is a premium worldwide streaming platform. We specialize in high-speed content delivery of global media, ensuring a clean and safe environment for all viewers.</p>
            </div>

            <button onclick="closeSettings()" style="width:100%; background:none; border:1px solid #444; color:#fff; padding:12px; border-radius:10px; margin-top:20px; cursor:pointer;">CLOSE</button>
        </div>
    </div>

    <div id="player">
        <div class="player-header">
            <span style="font-weight:900; color:var(--accent);">STREAMX CINEMA</span>
            <button onclick="closePlayer()" style="background:var(--main); color:#fff; border:none; padding:8px 15px; border-radius:5px; cursor:pointer;">EXIT X</button>
        </div>
        <iframe id="mainFrame" allowfullscreen></iframe>
    </div>

    <script>
        const TMDB_KEY = '8093d6645564c71853a8089408018e6e';
        const IMG_URL = 'https://image.tmdb.org/t/p/w500';

        function init() {
            loadSection('movie');
            window.onscroll = () => {
                const nav = document.getElementById('navbar');
                nav.style.background = window.pageYOffset > 50 ? '#000' : 'linear-gradient(to bottom, rgba(0,0,0,0.9), transparent)';
            };
        }

        async function loadSection(type) {
            const grid = document.getElementById('mediaGrid');
            document.getElementById('gridTitle').innerText = type === 'movie' ? "TRENDING MOVIES" : "POPULAR SERIES";
            grid.innerHTML = "<p>Connecting to Global Nodes...</p>";

            try {
                // FAIL-SAFE: Using a more robust Discover URL
                const url = `https://api.themoviedb.org/3/discover/${type}?api_key=${TMDB_KEY}&include_adult=false&sort_by=popularity.desc`;
                const res = await fetch(url);
                const data = await res.json();
                
                if(!data.results) throw new Error();

                grid.innerHTML = "";
                data.results.forEach(m => {
                    if(!m.poster_path) return;
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.onclick = () => playVideo(`https://vidsrc.to/embed/${type}/${m.id}`);
                    card.innerHTML = `<img src="${IMG_URL + m.poster_path}"><p>${m.title || m.name}</p>`;
                    grid.appendChild(card);
                });
            } catch (e) {
                grid.innerHTML = "<p style='color:var(--main)'>Server busy. Please click 'Movies' or 'Series' again to retry.</p>";
            }
        }

        function playVideo(url) {
            document.getElementById('player').style.display = 'flex';
            document.getElementById('mainFrame').src = url;
        }

        function closePlayer() {
            document.getElementById('player').style.display = 'none';
            document.getElementById('mainFrame').src = "";
        }

        function openSettings() { document.getElementById('settingsModal').style.display = 'flex'; }
        function closeSettings() { document.getElementById('settingsModal').style.display = 'none'; }
        
        function toggleSub(id) {
            const el = document.getElementById(id);
            el.style.display = el.style.display === 'block' ? 'none' : 'block';
        }
    </script>
</body>
</html>
