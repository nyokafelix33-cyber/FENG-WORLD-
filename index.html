<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FENG WORLD - Vision Web App</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary: #d3f243;
            --bg: #0b0e14;
            --card: #1c1f26;
            --text: #fff;
            --accent: #25d366;
            --radius: 12px;
        }

        body {
            background: var(--bg);
            color: var(--text);
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        header {
            padding: 20px 5%;
            background: var(--bg);
            position: sticky;
            top: 0;
            z-index: 2000;
            border-bottom: 2px solid var(--primary);
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .logo {
            font-weight: 900;
            font-size: 24px;
        }

        .logo span { color: var(--primary); }

        .search-area {
            background: rgba(255,255,255,0.07);
            border-radius: 12px;
            padding: 12px 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .search-area input {
            background: transparent;
            border: none;
            color: #fff;
            width: 100%;
            outline: none;
        }

        .slider-container { width: 100%; height: 45vh; position: relative; overflow: hidden; }
        .slide {
            position: absolute; inset: 0; opacity: 0;
            transition: 1s ease-in-out;
            background-size: cover; background-position: center;
            display: flex; align-items: flex-end; padding: 0 5% 50px;
        }
        .slide.active { opacity: 1; }
        .slide::after { content: ''; position: absolute; inset:0; background: linear-gradient(to top, var(--bg) 10%, transparent); }
        .slide-content { position: relative; z-index:2; }
        .badge { background: var(--primary); color:#000; padding:4px 10px; border-radius:4px; font-weight:900; font-size:10px; margin-bottom:8px; display:inline-block; }

        .shelf-title { padding: 20px 5% 10px; font-weight: 800; color: var(--primary); font-size: 13px; text-transform: uppercase; }
        .row { display: flex; overflow-x: auto; gap: 12px; padding: 0 5% 20px; scrollbar-width: none; }
        .row::-webkit-scrollbar { display: none; }

        .item { min-width: 125px; background: var(--card); border-radius: var(--radius); overflow: hidden; position: relative; cursor: pointer; }
        .item img { width: 100%; aspect-ratio: 2/3; object-fit: cover; }
        .item-meta { padding: 8px; }
        .item-meta b { font-size: 11px; display: block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .item-meta span { font-size: 9px; color: #777; font-weight: 800; }

        .drawer {
            position: fixed; inset: 0; background: var(--bg); z-index: 5000;
            display: none; flex-direction: column;
        }

        .drawer-head { padding: 25px 5%; border-bottom: 1px solid #222; display: flex; justify-content: space-between; align-items: center; }
        .set-item { padding: 20px 5%; border-bottom: 1px solid #1a1a1a; display: flex; justify-content: space-between; align-items: center; cursor:pointer; }

        footer {
            position: fixed; bottom:0; width:100%; background:#000;
            display: flex; padding:15px 0 35px; border-top:1px solid #1c1f26; z-index:3000;
        }

        .tab { flex:1; text-align:center; color:#555; cursor:pointer; }
        .tab.active { color: var(--primary); }
        .tab i { font-size:22px; display:block; margin-bottom:5px; }
        .tab span { font-size:10px; font-weight:800; }

        #video-frame { width:100%; height:80%; border:none; background:#000; }
    </style>
</head>
<body onload="FENG.boot()">

<header id="main-header">
    <div class="header-top">
        <div class="logo">FE<span>NG</span> WORLD</div>
        <i class="fas fa-cog fa-lg" onclick="FENG.view('settings')"></i>
    </div>
    <div class="search-area">
        <i class="fas fa-search" style="color:var(--primary)"></i>
        <input type="text" id="search-bar" placeholder="Find movies, TV shows..." onkeyup="FENG.search(this.value)">
    </div>
</header>

<main id="pane-home">
    <div class="slider-container" id="hero-slider"></div>

    <div class="shelf-title">Trending Movies</div>
    <div class="row" id="row-movies"></div>

    <div class="shelf-title">Popular Series</div>
    <div class="row" id="row-series"></div>
</main>

<div class="drawer" id="pane-settings">
    <div class="drawer-head">
        <h2 style="margin:0">Settings</h2>
        <i class="fas fa-times fa-2x" onclick="FENG.view('home')"></i>
    </div>
    <div class="set-item" onclick="location.reload()">
        <div><b>Sync Database</b><br><small>Refresh API Content</small></div>
        <i class="fas fa-sync-alt"></i>
    </div>
    <div class="set-item">
        <div><b>App Version</b><br><small>Vision Web 1.0</small></div>
        <i class="fas fa-code-branch"></i>
    </div>
    <div class="set-item" onclick="window.location.href='https://wa.me/260770605003'">
        <div><b>Support</b><br><small>WhatsApp Developer</small></div>
        <i class="fab fa-whatsapp"></i>
    </div>
</div>

<div class="drawer" id="pane-player">
    <div class="drawer-head">
        <span id="now-playing">Loading...</span>
        <button onclick="FENG.stopPlayer()" style="background:red;color:#fff;border:none;padding:8px 15px;border-radius:8px;">EXIT</button>
    </div>
    <iframe id="video-frame" allowfullscreen></iframe>
</div>

<footer>
    <div class="tab active" onclick="FENG.view('home', this)"><i class="fas fa-home"></i><span>Home</span></div>
    <div class="tab" onclick="FENG.loadType('movie', this)"><i class="fas fa-film"></i><span>Movies</span></div>
    <div class="tab" onclick="FENG.loadType('tv', this)"><i class="fas fa-tv"></i><span>Series</span></div>
    <div class="tab" onclick="FENG.view('settings', this)"><i class="fas fa-user-cog"></i><span>Settings</span></div>
</footer>

<script>
const KEY = 'ea593c3fa4d4942ece315977cd7e32c9';
let currentSlide = 0;

const FENG = {
    boot: function() {
        this.loadHero();
        this.loadShelf('movie/popular','row-movies');
        this.loadShelf('tv/top_rated','row-series');
    },

    loadHero: async function(){
        const r = await fetch(`https://api.themoviedb.org/3/trending/all/day?api_key=${KEY}`);
        const d = await r.json();
        const slider = document.getElementById('hero-slider');
        slider.innerHTML = '';
        d.results.slice(0,5).forEach((item,i)=>{
            const title = item.title || item.name;
            slider.innerHTML += `
                <div class="slide ${i===0?'active':''}" style="background-image:url(https://image.tmdb.org/t/p/original${item.backdrop_path})">
                    <div class="slide-content">
                        <span class="badge">TRENDING</span>
                        <h1 style="margin:0;font-size:32px;">${title}</h1>
                        <p style="font-size:12px;color:var(--primary)">${item.release_date||item.first_air_date} • ⭐ ${item.vote_average}</p>
                    </div>
                </div>
            `;
        });
        setInterval(()=>this.nextSlide(),5000);
    },

    nextSlide: function(){
        const slides = document.querySelectorAll('.slide');
        slides[currentSlide].classList.remove('active');
        currentSlide = (currentSlide+1)%slides.length;
        slides[currentSlide].classList.add('active');
    },

    loadShelf: async function(path,id){
        const r = await fetch(`https://api.themoviedb.org/3/${path}?api_key=${KEY}`);
        const d = await r.json();
        const container = document.getElementById(id);
        container.innerHTML = '';
        d.results.forEach(item=>{
            const type = item.media_type||(item.name?'tv':'movie');
            const title = item.title||item.name;
            const date = (item.release_date||item.first_air_date||'').split('-')[0];
            container.innerHTML += `
                <div class="item" onclick="FENG.play('${type}','${item.id}','${title.replace(/'/g,"")}')">
                    <img src="https://image.tmdb.org/t/p/w500${item.poster_path}">
                    <div class="item-meta">
                        <b>${title}</b>
                        <span>${date} • ${type.toUpperCase()}</span>
                    </div>
                </div>
            `;
        });
    },

    play: function(type,id,title){
        document.getElementById('now-playing').innerText = title;
        document.getElementById('video-frame').src = `https://vidsrc.to/embed/${type}/${id}`;
        this.view('player');
    },

    view: function(paneId,tab){
        this.hideDrawers();
        if(tab) document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active')), tab.classList.add('active');
        if(paneId!=='home') document.getElementById('pane-'+paneId).style.display='flex';
    },

    loadType: function(type,tab){
        this.view('home',tab);
        this.loadShelf(`discover/${type}`, type==='movie'?'row-movies':'row-series');
    },

    search: async function(query){
        if(query.length<3) return;
        this.loadShelf(`search/multi?query=${query}`,'row-movies');
    },

    hideDrawers: function(){
        document.querySelectorAll('.drawer').forEach(d=>d.style.display='none');
    },

    stopPlayer: function(){
        this.hideDrawers();
        document.getElementById('video-frame').src='';
    }
};
</script>

</body>
</html>
