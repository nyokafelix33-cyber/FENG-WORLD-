<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FENG WORLD - ONSTREAM EDITION</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary: #d3f243;
            --bg: #0b0e14;
            --card: #1c1f26;
            --text: #ffffff;
            --header: #000000;
        }

        body { 
            background: var(--bg); color: var(--text); 
            font-family: 'Inter', sans-serif; margin: 0; padding: 0;
            overflow-x: hidden; -webkit-tap-highlight-color: transparent;
        }

        /* ONSTREAM HEADER */
        header {
            padding: 20px 5%; display: flex; justify-content: space-between;
            align-items: center; position: sticky; top: 0; z-index: 1000;
            background: linear-gradient(to bottom, rgba(0,0,0,0.9), transparent);
        }

        .logo { display: flex; align-items: center; gap: 8px; font-weight: 900; font-size: 22px; }
        .logo span { color: var(--primary); }
        .f-box { background: var(--primary); color: #000; padding: 2px 10px; border-radius: 6px; }

        /* HERO SECTION */
        #hero {
            width: 100%; height: 45vh; background-size: cover; background-position: center;
            position: relative; display: flex; align-items: flex-end; padding: 0 5% 30px;
            box-sizing: border-box;
        }
        #hero::after {
            content: ''; position: absolute; inset: 0;
            background: linear-gradient(to top, var(--bg) 10%, transparent);
        }
        .hero-meta { position: relative; z-index: 2; max-width: 80%; }
        .hero-meta h1 { margin: 0; font-size: 28px; font-weight: 900; }

        /* HORIZONTAL SHELVES */
        .shelf { padding: 20px 0 10px 5%; font-weight: 800; color: var(--primary); text-transform: uppercase; font-size: 13px; letter-spacing: 1px; }
        .row { 
            display: flex; overflow-x: auto; gap: 12px; padding: 0 5% 20px;
            scrollbar-width: none;
        }
        .row::-webkit-scrollbar { display: none; }

        .item { 
            min-width: 120px; transition: 0.3s; 
            background: var(--card); border-radius: 10px; overflow: hidden;
        }
        .item:active { transform: scale(0.95); }
        .item img { width: 100%; aspect-ratio: 2/3; object-fit: cover; display: block; }
        .item-info { padding: 8px; font-size: 11px; font-weight: bold; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

        /* EPISODE DRAWER (SLIDE UP) */
        .drawer {
            position: fixed; inset: 0; background: var(--bg); z-index: 5000;
            display: none; flex-direction: column; animation: slideUp 0.3s ease-out;
        }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }

        .drawer-head { padding: 20px; display: flex; align-items: center; gap: 15px; border-bottom: 1px solid #222; }
        .season-tabs { display: flex; gap: 10px; padding: 15px 20px; overflow-x: auto; border-bottom: 1px solid #111; }
        .s-pill { background: var(--card); padding: 8px 18px; border-radius: 20px; font-size: 13px; white-space: nowrap; border: 1px solid #333; }
        .s-pill.active { background: var(--primary); color: #000; font-weight: bold; border-color: var(--primary); }

        .ep-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; padding: 20px; overflow-y: auto; }
        .ep-card { background: #252830; padding: 18px 0; text-align: center; border-radius: 10px; font-weight: 900; border: 1px solid rgba(255,255,255,0.05); }

        /* PLAYER */
        #player-box { position: fixed; inset: 0; background: #000; z-index: 6000; display: none; }

        /* FOOTER NAV */
        footer {
            position: fixed; bottom: 0; width: 100%; background: rgba(8,10,15,0.95);
            backdrop-filter: blur(10px); display: flex; padding: 15px 0 35px;
            border-top: 1px solid #1c1f26; z-index: 1000;
        }
        .nav-item { flex: 1; text-align: center; color: #555; font-size: 10px; font-weight: 800; }
        .nav-item.active { color: var(--primary); }
        .nav-item i { font-size: 22px; display: block; margin-bottom: 4px; }
    </style>
</head>
<body onload="ONSTREAM.boot()">

    <header>
        <div class="logo"><div class="f-box">F</div> FENG<span>WORLD</span></div>
        <i class="fas fa-search fa-lg"></i>
    </header>

    <div id="hero">
        <div class="hero-meta">
            <h1 id="hero-title">Loading...</h1>
            <p style="color:var(--primary); font-weight:bold; font-size:12px;">#1 IN MOVIES TODAY</p>
        </div>
    </div>

    <div class="shelf">Trending Now</div>
    <div class="row" id="trending-row"></div>

    <div class="shelf">Popular Series</div>
    <div class="row" id="series-row"></div>

    <div class="shelf">Action Movies</div>
    <div class="row" id="action-row"></div>

    <div class="drawer" id="content-drawer">
        <div class="drawer-head">
            <i class="fas fa-chevron-left fa-lg" onclick="ONSTREAM.closeDrawer()"></i>
            <h2 id="drawer-title" style="margin:0; font-size:18px;">Show Details</h2>
        </div>
        <div class="season-tabs" id="season-pills"></div>
        <div style="padding:10px 20px; font-size:11px; color:#555; font-weight:900;">SELECT EPISODE</div>
        <div class="ep-grid" id="episode-grid"></div>
    </div>

    <div id="player-box">
        <div style="padding: 20px; display: flex; justify-content: space-between;">
            <span id="playing-now" style="font-weight:900; font-size:12px;">STREAMING</span>
            <i class="fas fa-times fa-lg" onclick="ONSTREAM.closePlayer()"></i>
        </div>
        <iframe id="video-frame" style="width:100%; height:80%; border:none;" allowfullscreen></iframe>
    </div>

    <footer>
        <div class="nav-item active"><i class="fas fa-home"></i><span>Home</span></div>
        <div class="nav-item"><i class="fas fa-play-circle"></i><span>Movies</span></div>
        <div class="nav-item"><i class="fas fa-tv"></i><span>Series</span></div>
        <div class="nav-item"><i class="fas fa-user"></i><span>Me</span></div>
    </footer>

    <script>
        const KEY = 'ea593c3fa4d4942ece315977cd7e32c9';
        const ONSTREAM = {
            boot: function() {
                this.loadHero();
                this.loadShelf('trending/all/week', 'trending-row');
                this.loadShelf('tv/popular', 'series-row');
                this.loadShelf('discover/movie', 'action-row');
            },

            loadHero: async function() {
                const r = await fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=${KEY}`);
                const d = await r.json();
                const top = d.results[0];
                document.getElementById('hero').style.backgroundImage = `url(https://image.tmdb.org/t/p/original${top.backdrop_path})`;
                document.getElementById('hero-title').innerText = top.title;
            },

            loadShelf: async function(path, elementId) {
                const r = await fetch(`https://api.themoviedb.org/3/${path}?api_key=${KEY}`);
                const d = await r.json();
                const container = document.getElementById(elementId);
                d.results.forEach(item => {
                    const title = item.title || item.name;
                    const type = item.media_type || (item.name ? 'tv' : 'movie');
                    container.innerHTML += `
                        <div class="item" onclick="ONSTREAM.action('${type}', '${item.id}', '${title.replace(/'/g, "")}')">
                            <img src="https://image.tmdb.org/t/p/w500${item.poster_path}">
                            <div class="item-info">${title}</div>
                        </div>
                    `;
                });
            },

            action: async function(type, id, title) {
                if(type === 'tv') {
                    document.getElementById('drawer-title').innerText = title;
                    const res = await fetch(`https://api.themoviedb.org/3/tv/${id}?api_key=${KEY}`);
                    const data = await res.json();
                    
                    // Build Seasons
                    const sPills = document.getElementById('season-pills');
                    sPills.innerHTML = '';
                    data.seasons.forEach(s => {
                        if(s.season_number === 0) return;
                        sPills.innerHTML += `<div class="s-pill ${s.season_number === 1 ? 'active' : ''}" onclick="ONSTREAM.loadEpisodes('${id}', '${s.season_number}', '${title}')">Season ${s.season_number}</div>`;
                    });

                    this.loadEpisodes(id, 1, title);
                    document.getElementById('content-drawer').style.display = 'flex';
                } else {
                    this.play('movie', id, title);
                }
            },

            loadEpisodes: async function(id, sNum, title) {
                const res = await fetch(`https://api.themoviedb.org/3/tv/${id}/season/${sNum}?api_key=${KEY}`);
                const data = await res.json();
                const grid = document.getElementById('episode-grid');
                grid.innerHTML = '';
                data.episodes.forEach(ep => {
                    grid.innerHTML += `<div class="ep-card" onclick="ONSTREAM.play('tv', '${id}/${sNum}/${ep.episode_number}', '${title} E${ep.episode_number}')">${ep.episode_number}</div>`;
                });
            },

            play: function(type, path, title) {
                document.getElementById('playing-now').innerText = title;
                document.getElementById('video-frame').src = `https://vidsrc.to/embed/${type}/${path}`;
                document.getElementById('player-box').style.display = 'block';
            },

            closeDrawer: function() { document.getElementById('content-drawer').style.display = 'none'; },
            closePlayer: function() { 
                document.getElementById('player-box').style.display = 'none'; 
                document.getElementById('video-frame').src = '';
            }
        };
    </script>
</body>
</html>
