<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FENG WORLD PLATINUM</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary: #d3f243;
            --bg: #0b0e14;
            --card: #1c1f26;
            --text: #ffffff;
            --radius: 14px;
        }

        body { 
            background: var(--bg); color: var(--text); 
            font-family: 'Inter', sans-serif; margin: 0; padding: 0;
            overflow-x: hidden;
        }

        /* HEADER */
        header {
            padding: 20px 5%; background: var(--bg);
            position: sticky; top: 0; z-index: 2000;
        }
        .header-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .logo { font-weight: 900; font-size: 24px; letter-spacing: -1px; }
        .logo span { color: var(--primary); }

        /* SEARCH BAR FIX */
        .search-container {
            background: rgba(255,255,255,0.08); border-radius: 12px;
            padding: 12px 15px; display: flex; align-items: center; gap: 10px;
        }
        .search-container input { 
            background: transparent; border: none; color: #fff; 
            width: 100%; outline: none; font-size: 16px;
        }

        /* ONSTREAM SLIDESHOW */
        .slider {
            width: 100%; height: 40vh; position: relative; overflow: hidden;
            background: #000;
        }
        .slide {
            position: absolute; inset: 0; opacity: 0; transition: opacity 0.8s ease;
            background-size: cover; background-position: center;
            display: flex; align-items: flex-end; padding: 0 5% 40px;
        }
        .slide.active { opacity: 1; }
        .slide::after { 
            content: ''; position: absolute; inset: 0; 
            background: linear-gradient(to top, var(--bg) 15%, transparent); 
        }
        .slide-info { position: relative; z-index: 5; }

        /* GRID & CARDS */
        .shelf-title { padding: 25px 5% 10px; color: var(--primary); font-weight: 900; font-size: 14px; text-transform: uppercase; }
        .grid { 
            display: grid; grid-template-columns: repeat(3, 1fr); 
            gap: 12px; padding: 0 5% 100px; 
        }
        .card { background: var(--card); border-radius: var(--radius); overflow: hidden; position: relative; }
        .card img { width: 100%; aspect-ratio: 2/3; object-fit: cover; }
        .card-meta { padding: 8px; }
        .card-meta b { font-size: 11px; display: block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .card-meta span { font-size: 9px; color: #888; }
        .rating { 
            position: absolute; top: 5px; right: 5px; background: var(--primary); 
            color: #000; font-size: 9px; font-weight: 900; padding: 2px 6px; border-radius: 4px;
        }

        /* OVERLAYS (Settings / Player) */
        .overlay {
            position: fixed; inset: 0; background: var(--bg); z-index: 5000;
            display: none; flex-direction: column;
        }
        .overlay-header { padding: 20px 5%; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #222; }
        .menu-item { padding: 20px 5%; border-bottom: 1px solid #1a1a1a; display: flex; justify-content: space-between; }

        /* NAV */
        footer {
            position: fixed; bottom: 0; width: 100%; background: rgba(11, 14, 20, 0.95);
            backdrop-filter: blur(10px); display: flex; padding: 15px 0 30px; border-top: 1px solid #222; z-index: 3000;
        }
        .nav-btn { flex: 1; text-align: center; color: #555; cursor: pointer; }
        .nav-btn.active { color: var(--primary); }
        .nav-btn i { font-size: 22px; display: block; margin-bottom: 4px; }
        .nav-btn span { font-size: 10px; font-weight: bold; }
    </style>
</head>
<body onload="APP.init()">

    <header>
        <div class="header-top">
            <div class="logo">FE<span>NG</span> WORLD</div>
            <i class="fas fa-bars fa-lg" onclick="APP.show('settings')"></i>
        </div>
        <div class="search-container">
            <i class="fas fa-search"></i>
            <input type="text" id="query" placeholder="Search movies or series..." oninput="APP.search(this.value)">
        </div>
    </header>

    <div id="home-view">
        <div class="slider" id="hero-slider"></div>
        <div class="shelf-title" id="grid-label">Trending Now</div>
        <div class="grid" id="main-grid"></div>
    </div>

    <div class="overlay" id="view-settings">
        <div class="overlay-header">
            <h2>Menu & Settings</h2>
            <i class="fas fa-times fa-2x" onclick="APP.hide()"></i>
        </div>
        <div class="menu-item" onclick="location.reload()">
            <span>Refresh Content</span><i class="fas fa-sync"></i>
        </div>
        <div class="menu-item">
            <span>Dark Mode</span><i class="fas fa-moon"></i>
        </div>
        <div class="menu-item" onclick="window.location.href='https://wa.me/260770605003'">
            <span>Contact Developer</span><i class="fab fa-whatsapp"></i>
        </div>
        <div style="padding: 40px; text-align: center; opacity: 0.3; font-size: 12px;">Vision 68.1.1 Platinum Edition</div>
    </div>

    <div class="overlay" id="view-player">
        <div class="overlay-header">
            <span id="playing-title" style="font-weight:900;">Stream</span>
            <button onclick="APP.closePlayer()" style="background:red; color:#fff; border:none; padding:8px 12px; border-radius:8px;">CLOSE</button>
        </div>
        <iframe id="player-frame" style="width:100%; height:80%; border:none; background:#000;" allowfullscreen></iframe>
    </div>

    <footer>
        <div class="nav-btn active" onclick="APP.nav('all', this)"><i class="fas fa-home"></i><span>Home</span></div>
        <div class="nav-btn" onclick="APP.nav('movie', this)"><i class="fas fa-film"></i><span>Movies</span></div>
        <div class="nav-btn" onclick="APP.nav('tv', this)"><i class="fas fa-tv"></i><span>Series</span></div>
        <div class="nav-btn" onclick="APP.show('settings')"><i class="fas fa-user"></i><span>Me</span></div>
    </footer>

    <script>
        const API_KEY = 'ea593c3fa4d4942ece315977cd7e32c9';
        let slideIdx = 0;

        const APP = {
            init: function() {
                this.getSlides();
                this.fetch('trending/all/week');
            },

            getSlides: async function() {
                const r = await fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=${API_KEY}`);
                const d = await r.json();
                const slider = document.getElementById('hero-slider');
                d.results.slice(0, 5).forEach((m, i) => {
                    slider.innerHTML += `
                        <div class="slide ${i===0?'active':''}" style="background-image:url(https://image.tmdb.org/t/p/original${m.backdrop_path})">
                            <div class="slide-info">
                                <h1 style="margin:0">${m.title || m.name}</h1>
                                <p style="color:var(--primary); font-size:12px; font-weight:bold;">NOW TRENDING</p>
                            </div>
                        </div>
                    `;
                });
                setInterval(() => {
                    const slides = document.querySelectorAll('.slide');
                    slides[slideIdx].classList.remove('active');
                    slideIdx = (slideIdx + 1) % slides.length;
                    slides[slideIdx].classList.add('active');
                }, 5000);
            },

            fetch: async function(path) {
                const r = await fetch(`https://api.themoviedb.org/3/${path}?api_key=${API_KEY}`);
                const d = await r.json();
                this.render(d.results);
            },

            render: function(data) {
                const grid = document.getElementById('main-grid');
                grid.innerHTML = '';
                data.forEach(item => {
                    if(!item.poster_path) return;
                    const title = item.title || item.name;
                    const date = (item.release_date || item.first_air_date || 'N/A').split('-')[0];
                    const type = item.media_type || (item.title ? 'movie' : 'tv');
                    
                    grid.innerHTML += `
                        <div class="card" onclick="APP.play('${type}','${item.id}','${title.replace(/'/g,"")}')">
                            <div class="rating">${item.vote_average.toFixed(1)}</div>
                            <img src="https://image.tmdb.org/t/p/w500${item.poster_path}">
                            <div class="card-meta">
                                <b>${title}</b>
                                <span>${date} â€¢ ${type.toUpperCase()}</span>
                            </div>
                        </div>
                    `;
                });
            },

            search: async function(val) {
                if(val.length < 3) return;
                document.getElementById('grid-label').innerText = "Search Results";
                this.fetch(`search/multi?query=${val}`);
            },

            nav: function(type, el) {
                document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                el.classList.add('active');
                document.getElementById('grid-label').innerText = type === 'all' ? "Trending Now" : type.toUpperCase() + "S";
                this.fetch(type === 'all' ? 'trending/all/week' : `discover/${type}`);
            },

            play: function(type, id, title) {
                document.getElementById('playing-title').innerText = title;
                document.getElementById('player-frame').src = `https://vidsrc.to/embed/${type}/${id}`;
                document.getElementById('view-player').style.display = 'flex';
            },

            show: function(id) { document.getElementById('view-'+id).style.display = 'flex'; },
            hide: function() { document.querySelectorAll('.overlay').forEach(o => o.style.display = 'none'); },
            closePlayer: function() { this.hide(); document.getElementById('player-frame').src = ''; }
        };
    </script>
</body>
</html>
