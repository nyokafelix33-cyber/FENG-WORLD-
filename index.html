<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FENG WORLD Vision 12.0 MEGA</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

<style>
:root{
--primary:#d3f243;
--bg:#0b0e14;
--card:#1c1f26;
--text:#ffffff;
--radius:12px;
}
body{margin:0;font-family:Arial;background:var(--bg);color:white}

/* SPLASH */
#splash{
position:fixed;inset:0;background:black;z-index:99999;
display:flex;align-items:center;justify-content:center;
font-size:30px;font-weight:900;color:white;
filter:drop-shadow(0 0 20px #d3f243);
animation:fade 3s forwards;
}
@keyframes fade{to{opacity:0;visibility:hidden}}

/* LOADER */
#loader{
position:fixed;inset:0;background:#000a;z-index:9000;
display:none;align-items:center;justify-content:center;font-size:20px;
}

/* HEADER */
header{padding:10px;border-bottom:2px solid var(--primary);position:sticky;top:0;background:var(--bg);z-index:1000}
.logo{font-size:22px;font-weight:900}
.logo span{color:var(--primary)}
.search-box{display:flex;gap:8px;background:#222;padding:10px;border-radius:10px}
.search-box input{flex:1;background:none;border:none;color:white;outline:none}

/* ROWS */
.shelf-title{padding:10px;color:var(--primary);font-weight:900}
.row{display:flex;gap:10px;overflow-x:auto;padding:10px}
.item{min-width:130px;background:var(--card);border-radius:12px;overflow:hidden;cursor:pointer}
.item img{width:100%;height:200px;object-fit:cover}
.item-meta{padding:5px;font-size:12px}

/* DRAWERS */
.drawer{position:fixed;inset:0;background:#000;z-index:5000;display:none;flex-direction:column}
.drawer-head{padding:10px;border-bottom:1px solid #333;display:flex;justify-content:space-between}

/* FOOTER */
footer{position:fixed;bottom:0;width:100%;display:flex;background:#000;padding:10px;border-top:1px solid #333}
.tab{flex:1;text-align:center;color:#555}
.tab.active{color:var(--primary)}

/* LOGIN */
#login{position:fixed;inset:0;background:black;z-index:8000;display:none;align-items:center;justify-content:center}
.login-card{background:#1c1f26;padding:20px;border-radius:12px;width:300px}
.login-card input,button{width:100%;padding:10px;margin-top:10px;border-radius:8px;border:none}
button{background:var(--primary);font-weight:900}

/* PROFILE AVATAR */
#avatar{width:80px;height:80px;border-radius:50%;background:#333;display:flex;align-items:center;justify-content:center;font-size:30px}
</style>
</head>

<body onload="FENG.boot()">

<div id="splash">WELCOME TO <span style="color:#d3f243">FENG WORLD</span></div>
<div id="loader">‚è≥ Loading FENG Data...</div>

<!-- LOGIN -->
<div id="login">
<div class="login-card">
<h2>FENG FAN LOGIN</h2>
<input id="fanName" placeholder="Your fan name">
<button onclick="FENG.login()">ENTER</button>
</div>
</div>

<header>
<div class="logo">FE<span>NG</span> WORLD</div>
<div class="search-box">
<i class="fas fa-search"></i>
<input onkeyup="FENG.search(this.value)" placeholder="Search movies, series...">
</div>
</header>

<main id="home">
<div class="shelf-title">Continue Watching</div>
<div class="row" id="row-continue"></div>

<div class="shelf-title">Trending Movies</div>
<div class="row" id="row-movies"></div>

<div class="shelf-title">Popular Series</div>
<div class="row" id="row-series"></div>
</main>

<!-- PROFILE -->
<div class="drawer" id="profile">
<div class="drawer-head">
<b>Profile</b>
<i class="fas fa-times" onclick="FENG.hideAll()"></i>
</div>
<div style="padding:20px;text-align:center">
<div id="avatar"></div>
<h2 id="userName"></h2>
<button onclick="FENG.logout()">LOG OUT</button>
</div>
</div>

<!-- PLAYER -->
<div class="drawer" id="player">
<div class="drawer-head">
<span id="nowPlaying"></span>
<button onclick="FENG.hideAll()">EXIT</button>
</div>
<iframe id="video" width="100%" height="100%" allowfullscreen></iframe>
</div>

<footer>
<div class="tab active" onclick="FENG.tab('home',this)">Home</div>
<div class="tab" onclick="FENG.tab('profile',this)">Profile</div>
</footer>

<script>
const KEY="ea593c3fa4d4942ece315977cd7e32c9";
let cache = JSON.parse(localStorage.getItem("fengCache")||"{}");
let continueList = JSON.parse(localStorage.getItem("fengContinue")||"[]");
let fanDB = JSON.parse(localStorage.getItem("fengFans")||"{}");
let user = localStorage.getItem("fengUser");

function showLoader(x){document.getElementById("loader").style.display=x?"flex":"none"}

const FENG = {

boot: async function(){
try{
if(!user) document.getElementById("login").style.display="flex";
else this.loadProfile();

this.loadContinue();
await this.loadShelf("movie/popular","row-movies");
await this.loadShelf("tv/top_rated","row-series");
}catch(e){console.log("BOOT ERROR",e)}
},

/* LOGIN */
login:function(){
let name=document.getElementById("fanName").value;
if(name.length<2) return alert("Enter name");
user=name;
fanDB[name]={avatar:name[0]};
localStorage.setItem("fengUser",name);
localStorage.setItem("fengFans",JSON.stringify(fanDB));
location.reload();
},
logout:function(){
localStorage.clear();
location.reload();
},
loadProfile:function(){
document.getElementById("userName").innerText=user;
document.getElementById("avatar").innerText=user[0].toUpperCase();
},

/* TABS */
tab:function(id,el){
document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
el.classList.add("active");
this.hideAll();
document.getElementById(id).style.display="block";
},
hideAll:function(){
document.querySelectorAll(".drawer").forEach(d=>d.style.display="none");
},

/* API CACHED FETCH */
fetchCached: async function(url){
if(cache[url]) return cache[url];
showLoader(true);
try{
let r = await fetch(url);
let d = await r.json();
cache[url]=d;
localStorage.setItem("fengCache",JSON.stringify(cache));
showLoader(false);
return d;
}catch(e){
showLoader(false);
alert("Offline mode: showing cached data");
return cache[url]||{results:[]};
}
},

/* LOAD MOVIES */
loadShelf: async function(path,id){
let url=`https://api.themoviedb.org/3/${path}?api_key=${KEY}`;
let d = await this.fetchCached(url);
let row=document.getElementById(id);
row.innerHTML="";
d.results.forEach(item=>{
if(!item.poster_path) return;
let type=item.name?"tv":"movie";
let title=item.title||item.name;
row.innerHTML+=`
<div class="item" onclick="FENG.play('${type}','${item.id}','${title}','${item.poster_path}')">
<img src="https://image.tmdb.org/t/p/w500${item.poster_path}">
<div class="item-meta">${title}</div>
</div>`;
});
},

/* SEARCH */
search: async function(q){
if(q.length<2) return;
let url=`https://api.themoviedb.org/3/search/multi?api_key=${KEY}&query=${q}`;
let d = await this.fetchCached(url);
let row=document.getElementById("row-movies");
row.innerHTML="";
d.results.forEach(item=>{
if(!item.poster_path) return;
let type=item.media_type;
let title=item.title||item.name;
row.innerHTML+=`
<div class="item" onclick="FENG.play('${type}','${item.id}','${title}','${item.poster_path}')">
<img src="https://image.tmdb.org/t/p/w500${item.poster_path}">
<div class="item-meta">${title}</div>
</div>`;
});
},

/* CONTINUE WATCHING */
saveContinue:function(type,id,title,poster){
continueList = continueList.filter(x=>x.id!=id);
continueList.unshift({type,id,title,poster});
continueList = continueList.slice(0,10);
localStorage.setItem("fengContinue",JSON.stringify(continueList));
},
loadContinue:function(){
let row=document.getElementById("row-continue");
row.innerHTML="";
continueList.forEach(c=>{
row.innerHTML+=`
<div class="item" onclick="FENG.play('${c.type}','${c.id}','${c.title}','${c.poster}')">
<img src="https://image.tmdb.org/t/p/w500${c.poster}">
<div class="item-meta">${c.title}</div>
</div>`;
});
},

/* PLAYER */
play:function(type,id,title,poster){
this.saveContinue(type,id,title,poster);
this.hideAll();
document.getElementById("nowPlaying").innerText=title;
document.getElementById("video").src=`https://vidsrc.to/embed/${type}/${id}`;
document.getElementById("player").style.display="flex";
}

};
</script>

</body>
</html>
